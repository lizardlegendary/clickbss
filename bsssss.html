<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol{margin:0;padding:0}table td,table th{padding:0}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c2{height:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c3 doc-content"><p class="c0"><span class="c1">&lt;!DOCTYPE html&gt;</span></p><p class="c0"><span class="c1">&lt;html lang=&quot;en&quot;&gt;</span></p><p class="c0"><span class="c1">&lt;head&gt;</span></p><p class="c0"><span class="c1">&lt;meta charset=&quot;UTF-8&quot;&gt;</span></p><p class="c0"><span class="c1">&lt;title&gt;Bee Swarm Clicker - Fixes&lt;/title&gt;</span></p><p class="c0"><span class="c1">&lt;style&gt;</span></p><p class="c0"><span class="c1">&nbsp; body {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; margin: 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 100vh;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(to bottom, #87CEEB, #E0F7FA);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-family: &#39;Fredoka One&#39;, &#39;Comic Sans MS&#39;, cursive;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; overflow: hidden;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; user-select: none;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #game {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; width: 100vw;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 100vh;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; display: flex;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; align-items: center;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: relative;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #field {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; width: 560px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 560px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(to bottom, #98FB98, #90EE90);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 30px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: 18px solid #228B22;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: inset 0 0 90px rgba(0,0,0,0.25), 0 30px 60px rgba(0,0,0,0.4);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; margin-left: 40px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: relative;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; overflow: hidden;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; /* Flower Styling */</span></p><p class="c0"><span class="c1">&nbsp; .flower-square {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; width: 70px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 70px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 12px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; display: flex;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; flex-wrap: wrap;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; align-items: center;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; justify-content: center;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; gap: 3px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transition: transform 0.05s ease;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 4px 8px rgba(0,0,0,0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: rgba(255,255,255,0.5); </span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .flower-square:active { transform: scale(0.95); }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; /* Flower Colors */</span></p><p class="c0"><span class="c1">&nbsp; .flower-square.white &nbsp;{ background: linear-gradient(135deg, #ffffff, #e0e0e0) !important; }</span></p><p class="c0"><span class="c1">&nbsp; .flower-square.blue &nbsp; { background: linear-gradient(135deg, #64b5f6, #1976d2) !important; }</span></p><p class="c0"><span class="c1">&nbsp; .flower-square.red &nbsp; &nbsp;{ background: linear-gradient(135deg, #ff8a80, #d32f2f) !important; }</span></p><p class="c0"><span class="c1">&nbsp; .flower-square.orange { background: linear-gradient(135deg, #FFB74D, #F57C00) !important; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .flower { font-size: 26px; pointer-events: none; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .top-bar {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 16px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; left: 50%;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transform: translateX(-50%);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; display: flex;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; gap: 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 100;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .top-indicator {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: rgba(255,255,255,0.92);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 8px 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 30px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 22px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 6px 16px rgba(0,0,0,0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; backdrop-filter: blur(6px);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: 3px solid #FFD700;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: #333;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #honey-display { background: linear-gradient(135deg, #FFD700, #FFB600); color: #8B4513; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #bag-display {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; bottom: 30px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; left: 50%;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transform: translateX(-50%);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 12px 32px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 30px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 28px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 8px 20px rgba(0,0,0,0.3);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: 4px solid #FFA500;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: black;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transition: background 0.3s ease;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #convert-btn {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; bottom: 40px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; left: 40px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 16px 38px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 26px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(to bottom, #FFD700, #FFB600);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: #8B4513;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: none;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 50px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 10px #B8860B;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #convert-btn:hover { background: linear-gradient(to bottom,#FFEA80,#FFDB4D); }</span></p><p class="c0"><span class="c1">&nbsp; #convert-btn:active { transform: translateY(6px); box-shadow: 0 4px #B8860B; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .pollen-popup {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 38px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: #FFD700;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; text-shadow: 3px 3px 8px #000;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; pointer-events: none;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; animation: float 1.3s ease-out forwards;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 999;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; @keyframes float {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; 0% { opacity:1; transform:translateY(0) scale(1); }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; 100% { opacity:0; transform:translateY(-130px) scale(0.7); }</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #field-dropdown {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 60px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; left: 50%;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transform: translateX(-50%);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: rgba(255,255,255,0.95);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 8px 24px rgba(0,0,0,0.25);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 12px 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 200;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; display: none;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; min-width: 240px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; max-height: 80vh;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; overflow-y: auto;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: 4px solid #FFD700;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .dropdown-item {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 10px 24px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 18px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transition: background 0.2s;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; text-align: center;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-bottom: 1px solid #eee;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .dropdown-item:hover { background: #FFD700; color: #8B4513; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #shop-toggle {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; right: 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 38%;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 15px 25px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(to bottom, #FFD700, #FFB600);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: #8B4513;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: none;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 30px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 24px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 8px 20px rgba(0,0,0,0.3);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 150;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #hive-btn {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; left: calc(50% - 420px);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 18px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transform: translateX(-50%);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 10px 16px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(to bottom, #FFDE7D, #FFD14A);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 12px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: 3px solid #B8860B;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 160;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #shop-panel {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; right: -380px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; width: 380px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 100vh;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: rgba(255,255,255,0.98);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-left: 4px solid #FFD700;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: -10px 0 30px rgba(0,0,0,0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transition: right 0.3s ease;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; overflow-y: auto;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 100;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #shop-panel.open { right: 0; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .shop-section { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #ddd; }</span></p><p class="c0"><span class="c1">&nbsp; .shop-section h3 { color: #8B4513; text-align: center; margin-bottom: 15px; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .item {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: #f9f9f9;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: 2px solid #ddd;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 15px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 15px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; margin-bottom: 15px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transition: all 0.2s;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; .item:hover { border-color: #FFD700; box-shadow: 0 4px 12px rgba(255,215,0,0.3); }</span></p><p class="c0"><span class="c1">&nbsp; .item.bought { background: #e0e0e0; cursor: default; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .item-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }</span></p><p class="c0"><span class="c1">&nbsp; .item-stats { font-size: 13px; color: #666; margin-bottom: 5px; }</span></p><p class="c0"><span class="c1">&nbsp; .item-cost { font-size: 16px; color: #FFD700; font-weight: bold; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .buy-btn { width: 100%; padding: 8px; background: #FFD700; color: #8B4513; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; }</span></p><p class="c0"><span class="c1">&nbsp; .buy-btn:disabled { background: #ccc; cursor: not-allowed; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; /* Inventory &amp; Hive */</span></p><p class="c0"><span class="c1">&nbsp; #inventory-toggle {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; right: 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 55%;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 12px 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(to bottom, #FFF1A8, #FFE08A);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: #8B4513;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: none;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 30px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 18px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 8px 20px rgba(0,0,0,0.25);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 150;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #inventory-panel {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; right: -350px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; width: 350px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 100vh;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: rgba(255,255,255,0.96);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-left: 4px solid #FFD700;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: -10px 0 30px rgba(0,0,0,0.2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transition: right 0.3s ease;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 12px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; overflow-y: auto;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 101;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; #inventory-panel.open { right: 0; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; .inv-tabs { display:flex; gap:6px; margin-bottom:12px; }</span></p><p class="c0"><span class="c1">&nbsp; .inv-tab { flex:1; padding:8px 6px; text-align:center; cursor:pointer; border-radius:8px; border:2px solid #FFD700; background:#fff; font-weight:bold; }</span></p><p class="c0"><span class="c1">&nbsp; .inv-tab.active { background:#FFD700; color:#8B4513; }</span></p><p class="c0"><span class="c1">&nbsp; .inventory-grid { display:flex; gap:8px; flex-wrap:wrap; padding:8px; }</span></p><p class="c0"><span class="c1">&nbsp; .inv-item { width: 70px; height: 70px; border-radius:10px; background:#fff; border:2px solid #ddd; display:flex; align-items:center; justify-content:center; font-weight:bold; cursor:grab; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; #hive-view {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; left: calc(50% - 190px);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 50%;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transform: translateY(-50%);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; width: 380px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 760px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(180deg,#F2D9B3,#F8E7C4);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 18px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 18px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 30px 60px rgba(0,0,0,0.4);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 300;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; display: none;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; #hive-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }</span></p><p class="c0"><span class="c1">&nbsp; #hive-grid { width: 100%; height: calc(100% - 48px); display:grid; grid-template-columns: repeat(5,1fr); grid-auto-rows: 68px; gap:8px; overflow:auto; }</span></p><p class="c0"><span class="c1">&nbsp; .hive-slot { background: rgba(255,255,255,0.9); border-radius:8px; border:2px dashed #c59b2a; display:flex; align-items:center; justify-content:center; font-weight:bold; position:relative; }</span></p><p class="c0"><span class="c1">&nbsp; .hive-slot.empty { color:#8B4513; }</span></p><p class="c0"><span class="c1">&nbsp; .hive-slot .bee-icon { font-size:22px; pointer-events:none; }</span></p><p class="c0"><span class="c1">&nbsp; </span></p><p class="c0"><span class="c1">&nbsp; /* Quest Panel */</span></p><p class="c0"><span class="c1">&nbsp; #quest-toggle {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; right: 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 21%;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 15px 25px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: linear-gradient(to bottom, #606060, #404040);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: #FFD700;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border: none;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-radius: 30px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cursor: pointer;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-size: 24px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; font-weight: bold;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: 0 8px 20px rgba(0,0,0,0.3);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 150;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; #quest-panel {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; position: absolute;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; right: -360px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; top: 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; width: 360px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; height: 100vh;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; background: rgba(40, 40, 40, 0.95);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; border-left: 4px solid #FFD700;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; box-shadow: -10px 0 30px rgba(0,0,0,0.4);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; transition: right 0.3s ease;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; padding: 20px;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; overflow-y: auto;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; z-index: 102;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; color: white;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; #quest-panel.open { right: 0; }</span></p><p class="c0"><span class="c1">&nbsp; .quest-title { color: #FFD700; font-size: 22px; margin-bottom: 15px; text-align: center; border-bottom: 2px solid #FFD700; padding-bottom: 5px; }</span></p><p class="c0"><span class="c1">&nbsp; .quest-item { margin-bottom: 20px; padding: 10px; border: 1px solid #444; border-radius: 8px; background: rgba(255,255,255,0.1); }</span></p><p class="c0"><span class="c1">&nbsp; .quest-name { font-weight: bold; margin-bottom: 5px; font-size: 18px; color: #ffd700; }</span></p><p class="c0"><span class="c1">&nbsp; .quest-progress { font-size: 14px; margin-bottom: 5px; color: #eee; }</span></p><p class="c0"><span class="c1">&nbsp; .quest-subtask { font-size: 13px; margin-left: 10px; color: #ccc; }</span></p><p class="c0"><span class="c1">&nbsp; .quest-reward { font-size: 14px; color: #aaffaa; margin-top: 5px; font-weight: bold; }</span></p><p class="c0"><span class="c1">&nbsp; .quest-complete-btn { width: 100%; padding: 8px; margin-top: 10px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }</span></p><p class="c0"><span class="c1">&nbsp; .quest-complete-btn:disabled { background: #555; cursor: not-allowed; }</span></p><p class="c0"><span class="c1">&nbsp; .bees-list { padding:8px; border-top:1px solid #ddd; margin-top:10px; }</span></p><p class="c0"><span class="c1">&nbsp; .bee-row { display:flex; justify-content:space-between; align-items:center; padding:6px 0; border-bottom:1px dashed #eee; }</span></p><p class="c0"><span class="c1">&lt;/style&gt;</span></p><p class="c0"><span class="c1">&lt;link href=&quot;https://fonts.googleapis.com/css2?family=Fredoka+One&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;</span></p><p class="c0"><span class="c1">&lt;/head&gt;</span></p><p class="c0"><span class="c1">&lt;body&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&lt;div id=&quot;game&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;div id=&quot;field&quot;&gt;&lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &lt;div class=&quot;top-bar&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div id=&quot;hive-btn&quot; title=&quot;Open Hive&quot;&gt;&#127968; Hive&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;top-indicator&quot; id=&quot;field-indicator&quot;&gt;Dandy Field&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;top-indicator&quot; id=&quot;honey-display&quot;&gt;Honey: &lt;span id=&quot;honey&quot;&gt;0&lt;/span&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &lt;div id=&quot;field-dropdown&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;dandy&quot;&gt;Dandy&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;sunflower&quot;&gt;Sunflower&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;mushroom&quot;&gt;Mushroom&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;blueflower&quot;&gt;Blue Flower&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;clover&quot;&gt;Clover&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;bamboo&quot;&gt;Bamboo (5 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;spider&quot;&gt;Spider (5 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;strawberry&quot;&gt;Strawberry (5 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;pineapple&quot;&gt;Pineapple Patch (10 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;stump&quot;&gt;Stump Field (10 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;cactus&quot;&gt;Cactus Field (15 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;pumpkin&quot;&gt;Pumpkin Patch (15 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;pine&quot;&gt;Pine Tree Forest (15 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;dropdown-item&quot; data-field=&quot;rose&quot;&gt;Rose Field (15 Bees)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &lt;div id=&quot;bag-display&quot;&gt;Bag: &lt;span id=&quot;current-bag&quot;&gt;0&lt;/span&gt; / &lt;span id=&quot;max-bag&quot;&gt;200&lt;/span&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;button id=&quot;convert-btn&quot;&gt;Make Honey&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &lt;button id=&quot;quest-toggle&quot;&gt;&#128059; Quests&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;button id=&quot;shop-toggle&quot;&gt;&#128722; Shop&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;button id=&quot;inventory-toggle&quot;&gt;&#127890; Inventory&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &lt;div id=&quot;quest-panel&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;quest-title&quot;&gt;Black Bear&#39;s Quests&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div id=&quot;quest-list&quot;&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &lt;div id=&quot;shop-panel&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;h2 style=&quot;text-align: center; color: #8B4513;&quot;&gt;Shop&lt;/h2&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;shop-section&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;h3&gt;Tools&lt;/h3&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div id=&quot;tools-list&quot;&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;shop-section&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;h3&gt;Backpacks&lt;/h3&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div id=&quot;backpacks-list&quot;&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;shop-section&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;h3&gt;Eggs&lt;/h3&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div id=&quot;eggs-list&quot;&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &lt;div id=&quot;inventory-panel&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div style=&quot;text-align:center; font-weight:bold; color:#8B4513; margin-bottom:8px;&quot;&gt;Inventory&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div class=&quot;inv-tabs&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;inv-tab active&quot; data-tab=&quot;items&quot;&gt;Items&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;inv-tab&quot; data-tab=&quot;bees&quot;&gt;Bees&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div id=&quot;items-tab&quot; class=&quot;inv-content&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div style=&quot;font-size:14px; color:#666; padding:6px 2px;&quot;&gt;Drag eggs from here into your hive to hatch.&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;inventory-grid&quot; id=&quot;inventory-grid&quot;&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div id=&quot;bees-tab&quot; class=&quot;inv-content&quot; style=&quot;display:none;&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div style=&quot;font-size:14px; color:#666; padding:6px 2px;&quot;&gt;Your bees are collecting pollen...&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div class=&quot;bees-list&quot; id=&quot;bees-list&quot;&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &lt;div id=&quot;hive-view&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div id=&quot;hive-header&quot;&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;div style=&quot;font-weight:bold; font-size:20px; color:#8B4513;&quot;&gt;Hive (5 x 10)&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &lt;button id=&quot;close-hive&quot; style=&quot;padding:6px 10px; border-radius:8px; background:#ffd966; border:2px solid #b8860b; cursor:pointer;&quot;&gt;Close&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &lt;div id=&quot;hive-grid&quot;&gt;&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&lt;/div&gt;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&lt;script&gt;</span></p><p class="c0"><span class="c1">// ========== Game state ==========</span></p><p class="c0"><span class="c1">let pollen = 0;</span></p><p class="c0"><span class="c1">let honey = 100000000;</span></p><p class="c0"><span class="c1">let currentBag = 0;</span></p><p class="c0"><span class="c1">let bagCapacity = 200; </span></p><p class="c0"><span class="c1">let currentField = &#39;dandy&#39;;</span></p><p class="c0"><span class="c1">let currentTool = &#39;hands&#39;;</span></p><p class="c0"><span class="c1">let toolsBought = { hands: true };</span></p><p class="c0"><span class="c1">let backpacksBought = { pouch: true };</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// Inventory and Hive</span></p><p class="c0"><span class="c1">let eggsInventory = { basic: 0 };</span></p><p class="c0"><span class="c1">let eggsBoughtCount = { basic: 0 }; </span></p><p class="c0"><span class="c1">const BASIC_EGG_PRICES = [100,250,625,1563,3906,9766,24414,61035,152588,381469,953674,2384186,5960464,14901161,37252903,93132257,232830643,582076608,1455191520,3637978800,10000000000]; </span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// Hive: 5 columns x 10 rows =&gt; 50 slots</span></p><p class="c0"><span class="c1">const HIVE_COLS = 5;</span></p><p class="c0"><span class="c1">const HIVE_ROWS = 10;</span></p><p class="c0"><span class="c1">const hiveSlots = Array.from({length: HIVE_ROWS * HIVE_COLS}, () =&gt; null); </span></p><p class="c0"><span class="c1">const BEES = []; </span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">const BEE_STATS = {</span></p><p class="c0"><span class="c1">&nbsp; basic: { name: &#39;Basic Bee&#39;, pollenPerTick: 10, tickSeconds: 2, icon: &#39;&#128029;&#39; }</span></p><p class="c0"><span class="c1">};</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// UI elements</span></p><p class="c0"><span class="c1">const fieldEl = document.getElementById(&#39;field&#39;);</span></p><p class="c0"><span class="c1">const honeySpan = document.getElementById(&#39;honey&#39;);</span></p><p class="c0"><span class="c1">const currentBagSpan = document.getElementById(&#39;current-bag&#39;);</span></p><p class="c0"><span class="c1">const maxBagSpan = document.getElementById(&#39;max-bag&#39;);</span></p><p class="c0"><span class="c1">const bagDisplay = document.getElementById(&#39;bag-display&#39;);</span></p><p class="c0"><span class="c1">const fieldIndicator = document.getElementById(&#39;field-indicator&#39;);</span></p><p class="c0"><span class="c1">const dropdown = document.getElementById(&#39;field-dropdown&#39;);</span></p><p class="c0"><span class="c1">const convertBtn = document.getElementById(&#39;convert-btn&#39;);</span></p><p class="c0"><span class="c1">const shopToggle = document.getElementById(&#39;shop-toggle&#39;);</span></p><p class="c0"><span class="c1">const shopPanel = document.getElementById(&#39;shop-panel&#39;);</span></p><p class="c0"><span class="c1">const toolsList = document.getElementById(&#39;tools-list&#39;);</span></p><p class="c0"><span class="c1">const backpacksList = document.getElementById(&#39;backpacks-list&#39;);</span></p><p class="c0"><span class="c1">const inventoryToggle = document.getElementById(&#39;inventory-toggle&#39;);</span></p><p class="c0"><span class="c1">const inventoryPanel = document.getElementById(&#39;inventory-panel&#39;);</span></p><p class="c0"><span class="c1">const inventoryGrid = document.getElementById(&#39;inventory-grid&#39;);</span></p><p class="c0"><span class="c1">const eggsList = document.getElementById(&#39;eggs-list&#39;);</span></p><p class="c0"><span class="c1">const invTabs = document.querySelectorAll(&#39;.inv-tab&#39;);</span></p><p class="c0"><span class="c1">const beesListEl = document.getElementById(&#39;bees-list&#39;);</span></p><p class="c0"><span class="c1">const hiveBtn = document.getElementById(&#39;hive-btn&#39;);</span></p><p class="c0"><span class="c1">const hiveView = document.getElementById(&#39;hive-view&#39;);</span></p><p class="c0"><span class="c1">const hiveGrid = document.getElementById(&#39;hive-grid&#39;);</span></p><p class="c0"><span class="c1">const closeHive = document.getElementById(&#39;close-hive&#39;);</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// Quest elements</span></p><p class="c0"><span class="c1">const questToggle = document.getElementById(&#39;quest-toggle&#39;);</span></p><p class="c0"><span class="c1">const questPanel = document.getElementById(&#39;quest-panel&#39;);</span></p><p class="c0"><span class="c1">const questListEl = document.getElementById(&#39;quest-list&#39;);</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">const gridSize = 8;</span></p><p class="c0"><span class="c1">const cellSize = 70;</span></p><p class="c0"><span class="c1">const FLOWER_DURABILITY = 10;</span></p><p class="c0"><span class="c1">const FLOWER_RESPAWN_TIME = 5000;</span></p><p class="c0"><span class="c1">let flowerState = Array.from({length: gridSize}, () =&gt; Array(gridSize).fill(null)); </span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// ========== Quests ==========</span></p><p class="c0"><span class="c1">const BLACK_BEAR_QUESTS = [</span></p><p class="c0"><span class="c1">&nbsp; { id: 1, name: &quot;Sunflower Start&quot;, description: &quot;Collect 100 Pollen from the Sunflower Field.&quot;, objective: { type: &#39;pollen&#39;, field: &#39;sunflower&#39;, amount: 100 }, reward: { honey: 200 }, rewardText: &quot;200 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 2, name: &quot;Dandelion Deed&quot;, description: &quot;Collect 250 Pollen from the Dandy Field.&quot;, objective: { type: &#39;pollen&#39;, field: &#39;dandy&#39;, amount: 250 }, reward: { honey: 400 }, rewardText: &quot;400 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 3, name: &quot;Pollen Fetcher&quot;, description: &quot;Collect 500 Pollen.&quot;, objective: { type: &#39;pollen_total&#39;, amount: 500 }, reward: { honey: 500 }, rewardText: &quot;500 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 4, name: &quot;Red Request&quot;, description: &quot;Collect 600 Red Pollen.&quot;, objective: { type: &#39;pollen_color&#39;, color: &#39;red&#39;, amount: 600 }, reward: { honey: 650 }, rewardText: &quot;650 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 5, name: &quot;Into The Blue&quot;, description: &quot;Collect 1000 Blue Pollen.&quot;, objective: { type: &#39;pollen_color&#39;, color: &#39;blue&#39;, amount: 1000 }, reward: { honey: 750 }, rewardText: &quot;750 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 6, name: &quot;Variety Fetcher&quot;, description: &quot;Collect pollen from various fields.&quot;, type: &#39;multi&#39;, tasks: [{ text: &quot;1,000 from Mushroom&quot;, type: &#39;pollen&#39;, field: &#39;mushroom&#39;, amount: 1000 }, { text: &quot;1,000 from Blue Flower&quot;, type: &#39;pollen&#39;, field: &#39;blueflower&#39;, amount: 1000 }, { text: &quot;1,000 from Clover&quot;, type: &#39;pollen&#39;, field: &#39;clover&#39;, amount: 1000 }], reward: { honey: 1000 }, rewardText: &quot;1,000 Honey, 1 Silver Egg&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 7, name: &quot;Bamboo Boogie&quot;, description: &quot;Collect 4,000 Pollen from the Bamboo Field.&quot;, objective: { type: &#39;pollen&#39;, field: &#39;bamboo&#39;, amount: 4000 }, reward: { honey: 2100 }, rewardText: &quot;2,100 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 8, name: &quot;Red Request 2&quot;, description: &quot;Collect 5,000 Red Pollen.&quot;, objective: { type: &#39;pollen_color&#39;, color: &#39;red&#39;, amount: 5000 }, reward: { honey: 2500 }, rewardText: &quot;2,500 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 9, name: &quot;Cobweb Sweeper&quot;, description: &quot;Collect 6,000 Pollen from the Spider Field.&quot;, objective: { type: &#39;pollen&#39;, field: &#39;spider&#39;, amount: 6000 }, reward: { honey: 3200 }, rewardText: &quot;3,200 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 10, name: &quot;Leisure Loot&quot;, description: &quot;Collect 3,000 Pollen from multiple fields.&quot;, type: &#39;multi&#39;, tasks: [{ text: &quot;3,000 from Dandy&quot;, type: &#39;pollen&#39;, field: &#39;dandy&#39;, amount: 3000 }, { text: &quot;3,000 from Sunflower&quot;, type: &#39;pollen&#39;, field: &#39;sunflower&#39;, amount: 3000 }, { text: &quot;3,000 from Mushroom&quot;, type: &#39;pollen&#39;, field: &#39;mushroom&#39;, amount: 3000 }, { text: &quot;3,000 from Blue Flower&quot;, type: &#39;pollen&#39;, field: &#39;blueflower&#39;, amount: 3000 }], reward: { honey: 10000 }, rewardText: &quot;10,000 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 11, name: &quot;White Pollen Wrangler&quot;, description: &quot;Collect 10,000 White Pollen.&quot;, objective: { type: &#39;pollen_color&#39;, color: &#39;white&#39;, amount: 10000 }, reward: { honey: 7500 }, rewardText: &quot;7,500 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 12, name: &quot;Pineapple Picking&quot;, description: &quot;Collect 13,000 Pollen from Pineapple Patch.&quot;, objective: { type: &#39;pollen&#39;, field: &#39;pineapple&#39;, amount: 13000 }, reward: { honey: 10500 }, rewardText: &quot;10,500 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 13, name: &quot;Pollen Fetcher 2&quot;, description: &quot;Collect 16,000 Pollen.&quot;, objective: { type: &#39;pollen_total&#39;, amount: 16000 }, reward: { honey: 12000 }, rewardText: &quot;12,000 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 14, name: &quot;Weed Wacker&quot;, description: &quot;Collect 10,000 Pollen from various fields.&quot;, type: &#39;multi&#39;, tasks: [{ text: &quot;10,000 from Strawberry&quot;, type: &#39;pollen&#39;, field: &#39;strawberry&#39;, amount: 10000 }, { text: &quot;10,000 from Bamboo&quot;, type: &#39;pollen&#39;, field: &#39;bamboo&#39;, amount: 10000 }, { text: &quot;10,000 from Clover&quot;, type: &#39;pollen&#39;, field: &#39;clover&#39;, amount: 10000 }], reward: { honey: 25000 }, rewardText: &quot;25,000 Honey&quot; },</span></p><p class="c0"><span class="c1">&nbsp; { id: 15, name: &quot;Red + Blue = Gold&quot;, description: &quot;Collect 25,000 Red and Blue Pollen.&quot;, type: &#39;multi&#39;, tasks: [{ text: &quot;25,000 Blue Pollen&quot;, type: &#39;pollen_color&#39;, color: &#39;blue&#39;, amount: 25000 }, { text: &quot;25,000 Red Pollen&quot;, type: &#39;pollen_color&#39;, color: &#39;red&#39;, amount: 25000 }], reward: { honey: 25000 }, rewardText: &quot;25,000 Honey, 1 Gold Egg&quot; }</span></p><p class="c0"><span class="c1">];</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">let playerStats = { pollen_total: 0, pollen_red: 0, pollen_blue: 0, pollen_white: 0, pollen_orange: 0 };</span></p><p class="c0"><span class="c1">let currentQuestIndex = 0;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function checkQuestCompletion() {</span></p><p class="c0"><span class="c1">&nbsp; if (currentQuestIndex &gt;= BLACK_BEAR_QUESTS.length) return true;</span></p><p class="c0"><span class="c1">&nbsp; const quest = BLACK_BEAR_QUESTS[currentQuestIndex];</span></p><p class="c0"><span class="c1">&nbsp; let isComplete = true;</span></p><p class="c0"><span class="c1">&nbsp; if (quest.type === &#39;multi&#39;) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; quest.tasks.forEach(task =&gt; { if (!checkSingleObjective(task)) isComplete = false; });</span></p><p class="c0"><span class="c1">&nbsp; } else { isComplete = checkSingleObjective(quest.objective); }</span></p><p class="c0"><span class="c1">&nbsp; if (questPanel.classList.contains(&#39;open&#39;)) updateQuestUI();</span></p><p class="c0"><span class="c1">&nbsp; return isComplete;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0"><span class="c1">function checkSingleObjective(obj) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; let current = 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (obj.type === &#39;pollen&#39;) current = playerStats[`pollen_${obj.field}`] || 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; else if (obj.type === &#39;pollen_color&#39;) current = playerStats[`pollen_${obj.color}`] || 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; else if (obj.type === &#39;pollen_total&#39;) current = playerStats.pollen_total || 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; return current &gt;= obj.amount;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0"><span class="c1">function getObjectiveProgress(obj) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; let current = 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (obj.type === &#39;pollen&#39;) current = playerStats[`pollen_${obj.field}`] || 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; else if (obj.type === &#39;pollen_color&#39;) current = playerStats[`pollen_${obj.color}`] || 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; else if (obj.type === &#39;pollen_total&#39;) current = playerStats.pollen_total || 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; return Math.min(current, obj.amount);</span></p><p class="c0"><span class="c1">}</span></p><p class="c0"><span class="c1">function completeQuest() {</span></p><p class="c0"><span class="c1">&nbsp; if (!checkQuestCompletion()) return;</span></p><p class="c0"><span class="c1">&nbsp; const quest = BLACK_BEAR_QUESTS[currentQuestIndex];</span></p><p class="c0"><span class="c1">&nbsp; honey += (quest.reward.honey || 0);</span></p><p class="c0"><span class="c1">&nbsp; honeySpan.textContent = honey.toLocaleString();</span></p><p class="c0"><span class="c1">&nbsp; if (quest.type === &#39;multi&#39;) quest.tasks.forEach(task =&gt; subtractStat(task));</span></p><p class="c0"><span class="c1">&nbsp; else subtractStat(quest.objective);</span></p><p class="c0"><span class="c1">&nbsp; currentQuestIndex++;</span></p><p class="c0"><span class="c1">&nbsp; playerStats = { pollen_total: 0, pollen_red: 0, pollen_blue: 0, pollen_white: 0, pollen_orange: 0 };</span></p><p class="c0"><span class="c1">&nbsp; updateQuestUI();</span></p><p class="c0"><span class="c1">}</span></p><p class="c0"><span class="c1">function subtractStat(obj) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (obj.type === &#39;pollen&#39;) playerStats[`pollen_${obj.field}`] = 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (obj.type === &#39;pollen_color&#39;) playerStats[`pollen_${obj.color}`] = 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (obj.type === &#39;pollen_total&#39;) playerStats.pollen_total = 0;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0"><span class="c1">function updateQuestUI() {</span></p><p class="c0"><span class="c1">&nbsp; questListEl.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; if (currentQuestIndex &gt;= BLACK_BEAR_QUESTS.length) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; questListEl.innerHTML = `&lt;div style=&quot;text-align:center; padding:20px; color:#aaffaa;&quot;&gt;All quests complete!&lt;/div&gt;`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; return;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; const quest = BLACK_BEAR_QUESTS[currentQuestIndex];</span></p><p class="c0"><span class="c1">&nbsp; let isComplete = true;</span></p><p class="c0"><span class="c1">&nbsp; if (quest.type === &#39;multi&#39;) quest.tasks.forEach(task =&gt; { if (!checkSingleObjective(task)) isComplete = false; });</span></p><p class="c0"><span class="c1">&nbsp; else isComplete = checkSingleObjective(quest.objective);</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; const item = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; item.className = &#39;quest-item&#39;;</span></p><p class="c0"><span class="c1">&nbsp; let progressHtml = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; if (quest.type === &#39;multi&#39;) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; quest.tasks.forEach(task =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const cur = getObjectiveProgress(task);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; progressHtml += `&lt;div class=&quot;quest-subtask&quot;&gt;${task.text}: ${cur.toLocaleString()} / ${task.amount.toLocaleString()}&lt;/div&gt;`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; });</span></p><p class="c0"><span class="c1">&nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; const cur = getObjectiveProgress(quest.objective);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; progressHtml = `&lt;div class=&quot;quest-progress&quot;&gt;${cur.toLocaleString()} / ${quest.objective.amount.toLocaleString()}&lt;/div&gt;`;</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; item.innerHTML = `&lt;div class=&quot;quest-name&quot;&gt;${quest.id}. ${quest.name}&lt;/div&gt;&lt;div class=&quot;quest-progress&quot;&gt;${quest.description}&lt;/div&gt;${progressHtml}&lt;div class=&quot;quest-reward&quot;&gt;Reward: ${quest.rewardText}&lt;/div&gt;&lt;button class=&quot;quest-complete-btn&quot; ${!isComplete ? &#39;disabled&#39; : &#39;&#39;}&gt;Complete Quest&lt;/button&gt;`;</span></p><p class="c0"><span class="c1">&nbsp; item.querySelector(&#39;.quest-complete-btn&#39;).onclick = completeQuest;</span></p><p class="c0"><span class="c1">&nbsp; questListEl.appendChild(item);</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// ========== Field data ==========</span></p><p class="c0"><span class="c1">const FIELDS = {</span></p><p class="c0"><span class="c1">&nbsp; // 0 Bee Zone</span></p><p class="c0"><span class="c1">&nbsp; dandy: { name: &#39;Dandy Field&#39;, bonuses: { white: 0, blue: 0, red: 0, orange: 0 }, weights: { singleWhite: 400, singleBlue: 50, singleRed: 50, doubleWhite: 50 }, totalWeight: 550, beesRequired: 0 },</span></p><p class="c0"><span class="c1">&nbsp; sunflower: { name: &#39;Sunflower Field&#39;, bonuses: { white: 1, blue: 0, red: 0, orange: 0 }, weights: { singleWhite: 416, doubleWhite: 46, singleBlue: 89, singleRed: 63, doubleBlue: 10, doubleRed: 10 }, totalWeight: 634, beesRequired: 0 },</span></p><p class="c0"><span class="c1">&nbsp; mushroom: { name: &#39;Mushroom Field&#39;, bonuses: { white: 0, blue: 0, red: 1, orange: 0 }, weights: { singleWhite: 199, singleRed: 464, doubleWhite: 22, doubleRed: 52 }, totalWeight: 737, beesRequired: 0 },</span></p><p class="c0"><span class="c1">&nbsp; blueflower: { name: &#39;Blue Flower Field&#39;, bonuses: { white: 0, blue: 1, red: 0, orange: 0 }, weights: { singleWhite: 197, singleBlue: 461, doubleWhite: 22, doubleBlue: 51 }, totalWeight: 731, beesRequired: 0 },</span></p><p class="c0"><span class="c1">&nbsp; clover: { name: &#39;Clover Field&#39;, bonuses: { white: 0, blue: 0, red: 0, orange: 0 }, weights: { singleWhite: 100, singleBlue: 100, singleRed: 100, doubleWhite: 100, doubleBlue: 100, doubleRed: 100 }, totalWeight: 600, beesRequired: 0 },</span></p><p class="c0"><span class="c1">&nbsp; // 5 Bee Zone</span></p><p class="c0"><span class="c1">&nbsp; bamboo: { name: &#39;Bamboo Field&#39;, bonuses: { white: 0, blue: 2, red: 0, orange: 0 }, weights: { singleBlue: 400, doubleBlue: 200, tripleBlue: 50, singleWhite: 50 }, totalWeight: 700, beesRequired: 5 },</span></p><p class="c0"><span class="c1">&nbsp; spider: { name: &#39;Spider Field&#39;, bonuses: { white: 1, blue: 0, red: 0, orange: 0 }, weights: { singleWhite: 73, doubleWhite: 582, tripleWhite: 73 }, totalWeight: 728, beesRequired: 5 },</span></p><p class="c0"><span class="c1">&nbsp; strawberry: { name: &#39;Strawberry Field&#39;, bonuses: { white: 0, blue: 0, red: 2, orange: 0 }, weights: { singleRed: 400, doubleRed: 200, tripleRed: 50, singleWhite: 50 }, totalWeight: 700, beesRequired: 5 },</span></p><p class="c0"><span class="c1">&nbsp; // 10 Bee Zone</span></p><p class="c0"><span class="c1">&nbsp; pineapple: { name: &#39;Pineapple Patch&#39;, bonuses: { white: 1, blue: 0, red: 0, orange: 1 }, weights: { singleWhite: 200, singleOrange: 200, singleBlue: 100, doubleWhite: 100, doubleOrange: 100, doubleBlue: 50 }, totalWeight: 750, beesRequired: 10 },</span></p><p class="c0"><span class="c1">&nbsp; stump: { name: &#39;Stump Field&#39;, bonuses: { white: 0, blue: 2, red: 0, orange: 0 }, weights: { singleBlue: 300, doubleBlue: 200, tripleBlue: 100, singleWhite: 100, doubleWhite: 50 }, totalWeight: 750, beesRequired: 10 },</span></p><p class="c0"><span class="c1">&nbsp; // 15 Bee Zone</span></p><p class="c0"><span class="c1">&nbsp; cactus: { name: &#39;Cactus Field&#39;, bonuses: { white: 0, blue: 1, red: 1, orange: 0 }, weights: { singleBlue: 150, doubleBlue: 50, singleRed: 150, doubleRed: 50, singleWhite: 50 }, totalWeight: 450, beesRequired: 15 },</span></p><p class="c0"><span class="c1">&nbsp; // PUMPKIN PATCH</span></p><p class="c0"><span class="c1">&nbsp; pumpkin: { </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; name: &#39;Pumpkin Patch&#39;, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; bonuses: { white: 0, blue: 0, red: 0, orange: 1 }, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; weights: { </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; singleOrange: 50, doubleOrange: 150, tripleOrange: 300, singleWhite: 100 </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; totalWeight: 600, </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; beesRequired: 15 </span></p><p class="c0"><span class="c1">&nbsp; },</span></p><p class="c0"><span class="c1">&nbsp; pine: { name: &#39;Pine Tree Forest&#39;, bonuses: { white: 0, blue: 2, red: 0, orange: 0 }, weights: { singleBlue: 200, doubleBlue: 400, tripleBlue: 100, singleWhite: 50 }, totalWeight: 750, beesRequired: 15 },</span></p><p class="c0"><span class="c1">&nbsp; rose: { name: &#39;Rose Field&#39;, bonuses: { white: 0, blue: 0, red: 2, orange: 0 }, weights: { singleRed: 200, doubleRed: 400, tripleRed: 100, singleWhite: 50 }, totalWeight: 750, beesRequired: 15 }</span></p><p class="c0"><span class="c1">};</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function getFlowerData(fieldKey) {</span></p><p class="c0"><span class="c1">&nbsp; const field = FIELDS[fieldKey];</span></p><p class="c0"><span class="c1">&nbsp; const { weights } = field;</span></p><p class="c0"><span class="c1">&nbsp; let totalWeight = 0;</span></p><p class="c0"><span class="c1">&nbsp; for (const type in weights) totalWeight += weights[type];</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; const roll = Math.random() * totalWeight;</span></p><p class="c0"><span class="c1">&nbsp; let cumulative = 0;</span></p><p class="c0"><span class="c1">&nbsp; for (const type in weights) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cumulative += weights[type];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (roll &lt; cumulative) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; const isDouble = type.startsWith(&#39;double&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; const isTriple = type.startsWith(&#39;triple&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; const count = isTriple ? 3 : (isDouble ? 2 : 1);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; const color = type.replace(/single|double|triple/, &#39;&#39;).toLowerCase();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; return { count, color };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; return { count: 1, color: &#39;white&#39; };</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// ===================== TOOLS =====================</span></p><p class="c0"><span class="c1">const TOOLS = {</span></p><p class="c0"><span class="c1">&nbsp; hands: { name: &#39;Hands&#39;, range: 1, pattern: &#39;single&#39;, basePollen: 1, cost: 0, stats: &#39;1 cell, 1 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; scooper: { name: &#39;Scooper&#39;, range: 2, pattern: &#39;line&#39;, basePollen: 1, cost: 0, stats: &#39;2 cells line, 1 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; rake: { name: &#39;Rake&#39;, range: 3, pattern: &#39;line&#39;, basePollen: 2, cost: 500, stats: &#39;3 cells line, 2 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; clippers: { name: &#39;Clippers&#39;, range: 1, pattern: &#39;single&#39;, basePollen: 5, cost: 2500, stats: &#39;1 cell, 5 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; magnet: { name: &#39;Magnet&#39;, range: 3, pattern: &#39;surround&#39;, basePollen: 25, cost: 25000, stats: &#39;9 cells surround, 25 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; vacuum: { name: &#39;Vacuum&#39;, range: 4, pattern: &#39;surround&#39;, basePollen: 50, cost: 100000, stats: &#39;16 cells surround, 50 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; superScooper: { name: &#39;Super-Scooper&#39;, range: 5, pattern: &#39;line&#39;, basePollen: 15, cost: 40000, stats: &#39;5 cells line, 15 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; pulsar: { name: &#39;Pulsar&#39;, range: 3, pattern: &#39;surround&#39;, basePollen: 75, cost: 125000, stats: &#39;9 cells surround, 75 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; electromagnet: { name: &#39;Electro-Magnet&#39;, range: 2, pattern: &#39;surround&#39;, basePollen: 100, cost: 300000, stats: &#39;5 cells surround, 100 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; scissors: { name: &#39;Scissors&#39;, range: 6, pattern: &#39;line&#39;, basePollen: 25, cost: 850000, stats: &#39;6 cells line, 25 pollen&#39; },</span></p><p class="c0"><span class="c1">&nbsp; honeyDipper: { name: &#39;Honey Dipper&#39;, range: 4, pattern: &#39;surround&#39;, basePollen: 100, cost: 1500000, stats: &#39;16 cells surround, 100 pollen&#39; }</span></p><p class="c0"><span class="c1">};</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// ===================== BACKPACKS =====================</span></p><p class="c0"><span class="c1">const BACKPACKS = {</span></p><p class="c0"><span class="c1">&nbsp; pouch: { name: &#39;Pouch&#39;, capacity: 200, cost: 0, stats: &#39;200 Capacity&#39; },</span></p><p class="c0"><span class="c1">&nbsp; jar: { name: &#39;Jar&#39;, capacity: 950, cost: 250, stats: &#39;950 Capacity&#39; },</span></p><p class="c0"><span class="c1">&nbsp; backpack: { name: &#39;Backpack&#39;, capacity: 3700, cost: 1000, stats: &#39;3,700 Capacity&#39; },</span></p><p class="c0"><span class="c1">&nbsp; canister: { name: &#39;Med. Bag&#39;, capacity: 10200, cost: 5000, stats: &#39;10,200 Capacity&#39; },</span></p><p class="c0"><span class="c1">&nbsp; megaJug: { name: &#39;Mega-Jug&#39;, capacity: 25000, cost: 50000, stats: &#39;25,000 Capacity&#39; },</span></p><p class="c0"><span class="c1">&nbsp; compressor: { name: &#39;Compressor&#39;, capacity: 50000, cost: 160000, stats: &#39;50,000 Capacity&#39; },</span></p><p class="c0"><span class="c1">&nbsp; eliteBarrel: { name: &#39;Elite Barrel&#39;, capacity: 125000, cost: 650000, stats: &#39;125,000 Capacity&#39; },</span></p><p class="c0"><span class="c1">&nbsp; portOHive: { name: &#39;Port-O-Hive&#39;, capacity: 250000, cost: 1250000, stats: &#39;250,000 Capacity&#39; }</span></p><p class="c0"><span class="c1">};</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function getCellsInRange(row, col, range, pattern) {</span></p><p class="c0"><span class="c1">&nbsp; const cells = [];</span></p><p class="c0"><span class="c1">&nbsp; if (pattern === &#39;single&#39;) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; cells.push({r: row, c: col});</span></p><p class="c0"><span class="c1">&nbsp; } else if (pattern === &#39;line&#39;) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; for (let i = 0; i &lt; range; i++) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; if (row + i &lt; gridSize) cells.push({r: row + i, c: col});</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; } else if (pattern === &#39;surround&#39;) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; const radius = Math.floor(range/2);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; for(let r = row - radius; r &lt;= row + radius; r++){</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(let c = col - radius; c &lt;= col + radius; c++){</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(r &gt;= 0 &amp;&amp; r &lt; gridSize &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; gridSize) cells.push({r,c});</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; return cells;</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// ========== LOGIC &amp; RENDER ==========</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function initGame() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; renderField();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; renderShop();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; renderInventory();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // Start Bee Loop (runs every 1 second)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; setInterval(gameLoop, 1000);</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // Initial fill</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; for(let r=0; r&lt;gridSize; r++) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; for(let c=0; c&lt;gridSize; c++) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flowerState[r][c] = { ...getFlowerData(currentField), hp: FLOWER_DURABILITY };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; updateFlowerVisuals();</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function gameLoop() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // 1. Process Bees</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; processBees();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // 2. Refresh UI in case of changes</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function processBees() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (currentBag &gt;= bagCapacity) return;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; BEES.forEach(bee =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; // Simple tick system: check if bee is ready</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; if(!bee.lastTick) bee.lastTick = 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const now = Date.now();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; if (now - bee.lastTick &gt; bee.tickSeconds * 1000) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bee.lastTick = now;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Bee collects pollen from CURRENT FIELD</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // We&#39;ll treat this as &quot;White&quot; pollen for simplicity unless specific bees have color</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let amount = bee.pollenPerTick;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Cap at bag limit</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(currentBag + amount &gt; bagCapacity) amount = bagCapacity - currentBag;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(amount &gt; 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentBag += amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Bee stats count for quests!</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; playerStats.pollen_total += amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; playerStats[&#39;pollen_&#39; + currentField] = (playerStats[&#39;pollen_&#39; + currentField] || 0) + amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Defaulting bee collection to white since basic bee</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; playerStats[&#39;pollen_white&#39;] = (playerStats[&#39;pollen_white&#39;] || 0) + amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; checkQuestCompletion();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; });</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function renderField() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; fieldEl.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; for(let r=0; r&lt;gridSize; r++){</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; for(let c=0; c&lt;gridSize; c++){</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const div = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.className = &#39;flower-square&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.style.left = (c * cellSize) + &#39;px&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.style.top = (r * cellSize) + &#39;px&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.dataset.r = r;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.dataset.c = c;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.addEventListener(&#39;mousedown&#39;, handleFlowerClick);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fieldEl.appendChild(div);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function updateFlowerVisuals() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const squares = document.getElementsByClassName(&#39;flower-square&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; for(let i=0; i&lt;squares.length; i++) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const div = squares[i];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const r = parseInt(div.dataset.r);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const c = parseInt(div.dataset.c);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const flower = flowerState[r][c];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.className = &#39;flower-square&#39;; // reset</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; if (flower &amp;&amp; flower.hp &gt; 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.classList.add(flower.color);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Render petals based on count</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let content = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(flower.count === 1) content = &#39;&lt;div class=&quot;flower&quot;&gt;&#127800;&lt;/div&gt;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(flower.count === 2) content = &#39;&lt;div class=&quot;flower&quot;&gt;&#127800;&lt;/div&gt;&lt;div class=&quot;flower&quot;&gt;&#127800;&lt;/div&gt;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else if(flower.count === 3) content = &#39;&lt;div class=&quot;flower&quot;&gt;&#127800;&lt;/div&gt;&lt;div class=&quot;flower&quot;&gt;&#127800;&lt;/div&gt;&lt;div class=&quot;flower&quot;&gt;&#127800;&lt;/div&gt;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; div.innerHTML = content;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// Cooldown visual</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;div.innerHTML = &#39;&lt;span style=&quot;font-size:12px; opacity:0.5&quot;&gt;&#127793;&lt;/span&gt;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function handleFlowerClick(e) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (currentBag &gt;= bagCapacity) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; showFloatingText(e.clientX, e.clientY, &quot;Bag Full!&quot;, &quot;#ff5555&quot;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const r = parseInt(e.currentTarget.dataset.r);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const c = parseInt(e.currentTarget.dataset.c);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const tool = TOOLS[currentTool];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const targets = getCellsInRange(r, c, tool.range, tool.pattern);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; let totalPollen = 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; targets.forEach(pos =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const f = flowerState[pos.r][pos.c];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; if(f &amp;&amp; f.hp &gt; 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Fixed: base * count only, no field bonus added to amount</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let amount = tool.basePollen * f.count;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; amount = Math.floor(amount);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Add to bag</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(currentBag + amount &gt; bagCapacity) amount = bagCapacity - currentBag;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentBag += amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Stats &amp; Quests (without bonus for consistency)</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; totalPollen += amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; playerStats.pollen_total += amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; playerStats[&#39;pollen_&#39; + currentField] = (playerStats[&#39;pollen_&#39; + currentField] || 0) + amount;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; playerStats[&#39;pollen_&#39; + f.color] = (playerStats[&#39;pollen_&#39; + f.color] || 0) + amount;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Reduce flower HP</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; f.hp--;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(f.hp &lt;= 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateFlowerVisuals(); // Update immediately to show sapling</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Regrowth Logic</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setTimeout(() =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Respawn the flower in data</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flowerState[pos.r][pos.c] = { ...getFlowerData(currentField), hp: FLOWER_DURABILITY };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // FORCE VISUAL UPDATE</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateFlowerVisuals();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }, FLOWER_RESPAWN_TIME);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; });</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if(totalPollen &gt; 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; checkQuestCompletion();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; showFloatingText(e.clientX, e.clientY, &quot;+&quot; + totalPollen, &quot;#FFD700&quot;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; updateFlowerVisuals();</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function showFloatingText(x, y, text, color) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const el = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; el.className = &#39;pollen-popup&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; el.style.left = x + &#39;px&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; el.style.top = y + &#39;px&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; el.style.color = color;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; el.textContent = text;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; document.body.appendChild(el);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; setTimeout(() =&gt; el.remove(), 1200);</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function updateUI() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; honeySpan.textContent = honey.toLocaleString();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; currentBagSpan.textContent = currentBag.toLocaleString();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; maxBagSpan.textContent = bagCapacity.toLocaleString();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; fieldIndicator.textContent = FIELDS[currentField].name;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // Bag bar color</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const pct = currentBag / bagCapacity;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; bagDisplay.style.background = `linear-gradient(90deg, #FFA500 ${pct*100}%, #fff ${pct*100}%)`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // Update Bees list text</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if(BEES.length &gt; 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; beesListEl.innerHTML = BEES.map(b =&gt; `&lt;div class=&quot;bee-row&quot;&gt;&lt;span&gt;${b.icon} ${b.name}&lt;/span&gt;&lt;span&gt;+${b.pollenPerTick}/tick&lt;/span&gt;&lt;/div&gt;`).join(&#39;&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; beesListEl.innerHTML = &quot;No bees yet!&quot;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// ========== SHOP &amp; INTERACTION ==========</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">convertBtn.onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if(currentBag === 0) return;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; honey += currentBag;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; currentBag = 0;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">};</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">fieldIndicator.onclick = (e) =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; e.stopPropagation();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; dropdown.style.display = dropdown.style.display === &#39;block&#39; ? &#39;none&#39; : &#39;block&#39;;</span></p><p class="c0"><span class="c1">};</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">document.addEventListener(&#39;click&#39;, (e) =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if(!fieldIndicator.contains(e.target) &amp;&amp; !dropdown.contains(e.target)) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; dropdown.style.display = &#39;none&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">});</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// Dropdown Items</span></p><p class="c0"><span class="c1">document.querySelectorAll(&#39;.dropdown-item&#39;).forEach(item =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; item.onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const key = item.dataset.field;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const required = FIELDS[key].beesRequired;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; if(BEES.length &lt; required) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(`You need ${required} bees to enter ${FIELDS[key].name}!`);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; return;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; currentField = key;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; dropdown.style.display = &#39;none&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; // Reset field</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; for(let r=0; r&lt;gridSize; r++) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for(let c=0; c&lt;gridSize; c++) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; flowerState[r][c] = { ...getFlowerData(currentField), hp: FLOWER_DURABILITY };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; updateFlowerVisuals();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; };</span></p><p class="c0"><span class="c1">});</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function renderShop() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // Tools</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; toolsList.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; for(const key in TOOLS) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const t = TOOLS[key];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const div = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.className = `item ${toolsBought[key] ? &#39;bought&#39; : &#39;&#39;}`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.innerHTML = `</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-name&quot;&gt;${t.name}&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-stats&quot;&gt;${t.stats}&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-cost&quot;&gt;${toolsBought[key] ? &#39;Owned&#39; : t.cost.toLocaleString() + &#39; Honey&#39;}&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button class=&quot;buy-btn&quot; ${toolsBought[key] ? &#39;disabled&#39; : &#39;&#39;}&gt;${toolsBought[key] ? &#39;Equip&#39; : &#39;Buy&#39;}&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; `;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const btn = div.querySelector(&#39;button&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; btn.onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(toolsBought[key]) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentTool = key;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(`Equipped ${t.name}`);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(honey &gt;= t.cost) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; honey -= t.cost;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; toolsBought[key] = true;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentTool = key;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderShop();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;Not enough honey!&quot;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; toolsList.appendChild(div);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // Backpacks</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; backpacksList.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; for(const key in BACKPACKS) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const b = BACKPACKS[key];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const div = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.className = `item ${backpacksBought[key] ? &#39;bought&#39; : &#39;&#39;}`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.innerHTML = `</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-name&quot;&gt;${b.name}&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-stats&quot;&gt;${b.stats}&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-cost&quot;&gt;${backpacksBought[key] ? &#39;Owned&#39; : b.cost.toLocaleString() + &#39; Honey&#39;}&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &lt;button class=&quot;buy-btn&quot; ${backpacksBought[key] ? &#39;disabled&#39; : &#39;&#39;}&gt;${backpacksBought[key] ? &#39;Equip&#39; : &#39;Buy&#39;}&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; `;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const btn = div.querySelector(&#39;button&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; btn.onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(backpacksBought[key]) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bagCapacity = b.capacity;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(`Equipped ${b.name}`);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(honey &gt;= b.cost) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; honey -= b.cost;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; backpacksBought[key] = true;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bagCapacity = b.capacity;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderShop();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;Not enough honey!&quot;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; backpacksList.appendChild(div);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; </span></p><p class="c0"><span class="c1">&nbsp; &nbsp; // Eggs</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; eggsList.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const eggDiv = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; eggDiv.className = &#39;item&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const priceIdx = Math.min(eggsBoughtCount.basic, BASIC_EGG_PRICES.length - 1);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; const price = BASIC_EGG_PRICES[priceIdx];</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; eggDiv.innerHTML = `</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-name&quot;&gt;Basic Egg&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-stats&quot;&gt;Hatches a Basic Bee&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;div class=&quot;item-cost&quot;&gt;${price.toLocaleString()} Honey&lt;/div&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &lt;button class=&quot;buy-btn&quot;&gt;Buy&lt;/button&gt;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; `;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; eggDiv.querySelector(&#39;button&#39;).onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; if(honey &gt;= price) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; honey -= price;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eggsBoughtCount.basic++;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eggsInventory.basic++;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderShop();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderInventory();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; updateUI();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;Not enough honey!&quot;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; eggsList.appendChild(eggDiv);</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// Menus Toggles</span></p><p class="c0"><span class="c1">shopToggle.onclick = () =&gt; shopPanel.classList.toggle(&#39;open&#39;);</span></p><p class="c0"><span class="c1">questToggle.onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; questPanel.classList.toggle(&#39;open&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if (questPanel.classList.contains(&#39;open&#39;)) updateQuestUI();</span></p><p class="c0"><span class="c1">};</span></p><p class="c0"><span class="c1">inventoryToggle.onclick = () =&gt; inventoryPanel.classList.toggle(&#39;open&#39;);</span></p><p class="c0"><span class="c1">hiveBtn.onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; hiveView.style.display = &#39;block&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; renderHive();</span></p><p class="c0"><span class="c1">};</span></p><p class="c0"><span class="c1">closeHive.onclick = () =&gt; hiveView.style.display = &#39;none&#39;;</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// Inventory Tabs</span></p><p class="c0"><span class="c1">invTabs.forEach(tab =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; tab.onclick = () =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; invTabs.forEach(t =&gt; t.classList.remove(&#39;active&#39;));</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; tab.classList.add(&#39;active&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; document.querySelectorAll(&#39;.inv-content&#39;).forEach(c =&gt; c.style.display = &#39;none&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; document.getElementById(tab.dataset.tab + &#39;-tab&#39;).style.display = &#39;block&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; };</span></p><p class="c0"><span class="c1">});</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function renderInventory() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; inventoryGrid.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; if(eggsInventory.basic &gt; 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const div = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.className = &#39;inv-item&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.textContent = `&#129370; x${eggsInventory.basic}`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.draggable = true;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; div.ondragstart = (e) =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e.dataTransfer.setData(&#39;type&#39;, &#39;basic_egg&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; inventoryGrid.appendChild(div);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">function renderHive() {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; hiveGrid.innerHTML = &#39;&#39;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; hiveSlots.forEach((bee, index) =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; const slot = document.createElement(&#39;div&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; slot.className = `hive-slot ${!bee ? &#39;empty&#39; : &#39;&#39;}`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; if(bee) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slot.innerHTML = `&lt;span class=&quot;bee-icon&quot;&gt;${bee.icon}&lt;/span&gt;`;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; } else {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slot.textContent = &quot;Empty&quot;;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slot.ondragover = (e) =&gt; e.preventDefault();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; slot.ondrop = (e) =&gt; {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const type = e.dataTransfer.getData(&#39;type&#39;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(type === &#39;basic_egg&#39;) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if(eggsInventory.basic &gt; 0) {</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; eggsInventory.basic--;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Clone the bee stats object so every bee has its own timer</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; const newBee = { ...BEE_STATS.basic, lastTick: Date.now() };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hiveSlots[index] = newBee;</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; BEES.push(newBee);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderInventory();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; renderHive();</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; alert(&quot;Hatched a Basic Bee!&quot;);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; };</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; }</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; &nbsp; &nbsp; hiveGrid.appendChild(slot);</span></p><p class="c0"><span class="c1">&nbsp; &nbsp; });</span></p><p class="c0"><span class="c1">}</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">// Start</span></p><p class="c0"><span class="c1">initGame();</span></p><p class="c0 c2"><span class="c1"></span></p><p class="c0"><span class="c1">&lt;/script&gt;</span></p><p class="c0"><span class="c1">&lt;/body&gt;</span></p><p class="c0"><span class="c1">&lt;/html&gt;</span></p><p class="c0 c2"><span class="c1"></span></p></body></html>